{% extends "base.html" %}

{% block content %}
<h1> By tools </h1>
<!-- Tabs nav -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
    {% for table in tables %}
    <li class="nav-item" role="presentation">
        <button class="nav-link {% if loop.first %}active{% endif %}" 
                id="{{ table['name'] }}-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#{{ table['name'] }}" 
                type="button" 
                role="tab" 
                aria-controls="{{ table['name'] }}" 
                aria-selected="{{ 'true' if loop.first else 'false' }}">
            {{ table["name"] }}
        </button>
    </li>
    {% endfor %}
</ul>

<!-- Tabs content -->
<div class="tab-content" id="myTabContent">
    {% for table in tables %}
    <div class="tab-pane fade {% if loop.first %}show active{% endif %}" 
         id="{{ table['name'] }}" 
         role="tabpanel" 
         aria-labelledby="{{ table['name'] }}-tab">
        <button id="refresh-{{ table['name'] }}" type="button" class="btn btn-sm btn-outline-primary" title="Refresh" onclick="refreshTab('{{ table['name'] }}', true)">
            <span id="refresh-{{ table['name'] }}-text"><i class="bi bi-arrow-clockwise"></i></span>
        </button>
        <div style="max-width: 1300px; overflow-x: auto; overflow-y: hidden; border: 1px solid #ccc; padding: 10px;">
            <table id="{{ table['name'] }}-table" class="table table-striped table-bordered table-hover table-sm table-pickerable">
                <thead>
                    <tr>
                        <th>#</th>
                        {% for colname in table["colnames"] %}
                        <th>{{ colname }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody id="{{ table['name']}}-tbody">
                </tbody>
            </table>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        {% for table in tables %}
        refreshTab("{{ table['name'] }}", false)
        {% endfor %}
    });
</script>
{% endblock %}
